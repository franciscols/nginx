ngx_http_upstream_memcached_hash_module 0.01
============================================

Description.


INSTALLATION

  cat /path/to/ngx_http_upstream_memcached_hash_module-0.01/nginx-patches/* |
      patch -p2
  ./configure \
      --add-module=/path/to/ngx_http_upstream_memcached_hash_module-0.01/
  make
  make install


USAGE

    upstream memcached_cluster {
        memcached_hash  ketama_points=150  weight_scale=10;

        server   backend1.example.com:11211  weight=15;
        server   127.0.0.1:11211  weight=10  max_fails=3  fail_timeout=30s;

        server   unix:/tmp/memcached.sock  weight=10  down;
    }

And the you use memcached_cluster in memcached_pass directve:

    server {
        location / {
            set             $memcached_key   "$uri$is_args$args";
            memcached_pass  memcached_cluster;
            error_page      404 502 504 = @fallback;
        }

        location @fallback {
            proxy_pass      http://backend;
        }
    }

The order of server directives matters.


SUPPORT
